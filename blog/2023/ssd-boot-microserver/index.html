<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Boot desde el ssd instalado en la bahía ODD del HP Microserver Gen8 | Pablo Sánchez</title> <meta name="author" content="Pablo Sánchez"> <meta name="description" content="Como hacer boot desde ssd en un HP Microserver Gen8"> <meta name="keywords" content="academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://elpavlillo.github.io/blog/2023/ssd-boot-microserver/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Pablo </span>Sánchez</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositorios</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Curriculum</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post justify"> <header class="post-header"> <h1 class="post-title">Boot desde el ssd instalado en la bahía ODD del HP Microserver Gen8</h1> <p class="post-meta">30 November, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/microserver"> <i class="fas fa-hashtag fa-sm"></i> microserver</a>   <a href="/blog/tag/ssd"> <i class="fas fa-hashtag fa-sm"></i> ssd</a>   <a href="/blog/tag/boot"> <i class="fas fa-hashtag fa-sm"></i> boot</a>     ·   <a href="/blog/category/servers"> <i class="fas fa-tag fa-sm"></i> servers</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>El HP Microserver Gen8 es un servidor muy competente por el precio que tiene actualmente (en concreto si le cambias la CPU que tiene de stock y le pones la máxima cantidad de RAM), tanto si lo quieres para montar un NAS como un servidor de virtualización, ahora, dicho esto, tiene un fallo de diseño que os puede volver un poco locos como a mi.</p> <p><strong>NO HACE BOOT DESDE EL PUERTO SATA EXTRA NATIVAMENTE</strong></p> <p>Pero este gran fallo tiene un workaround relativamente sencillo. Usando el controlador Smart Array B120i RAID integrado podemos crear una unidad lógica y luego seleccionarla como unidad de arranque, como vamos a ver a continuación:</p> <blockquote> <p><strong>ADVERTENCIA</strong>: Muchos OS actuales destinados a virtualización o almacenamiento en red no recomiendan el uso de controladores de RAID por hardware o controladores SAS, porque requieren acceso directo al disco para el correcto funcionamiento del RAID por software, pero como este apaño solo es para la unidad de arranque a mi no me ha dado ningún problema.</p> </blockquote> <h5 id="paso-1"><strong>Paso 1:</strong></h5> <hr> <p>Conectar un cable ethernet al puerto ILO</p> <h5 id="paso-2"><strong>Paso 2:</strong></h5> <hr> <p>Encontrar la IP que el router o el servidor DHCP le ha proporcionado, esto se puede hacer desde el router o usando algún programa como <a href="https://angryip.org/" rel="external nofollow noopener" target="_blank">Angry IP Scanner</a> en windows o <a href="https://play.google.com/store/apps/details?id=com.overlook.android.fing&amp;hl=es&amp;gl=US" rel="external nofollow noopener" target="_blank">Fing</a> en android</p> <h5 id="paso-3"><strong>Paso 3:</strong></h5> <hr> <p>Hacer login en el dashboard de ILO usando la ip que hemos conseguido en el paso anterior.</p> <figure> <picture> <img src="/assets/img/boot_ssd/1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h5 id="paso-4"><strong>Paso 4:</strong></h5> <hr> <p>Ir a <strong>“Remote Console”</strong> -&gt; <strong>“Remote Console”</strong></p> <p>Una vez estamos en Remote Console tendremos 2 opciones:</p> <ul> <li> <strong>“HTML5 Integrated Remote Console”</strong> marcada en verde. Está opción solo nos saldrá si tenemos el servidor con la última versión de ILO disponible, en caso contrario no aparecerá.</li> <li> <strong>“Java Integrated Remote Console (Java IRC)”</strong> marcada en naranja. Está opción nos saldrá tanto si tenemos la última versión de ILO como si no.</li> </ul> <figure> <picture> <img src="/assets/img/boot_ssd/2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>En mi caso voy a seleccionar la consola de HTML 5, pero si no la tenéis disponible no pasa nada, podéis hacer lo mismo con la de Java.</p> <h5 id="paso-5"><strong>Paso 5:</strong></h5> <hr> <p>Una vez tenemos una de las consolas abiertas encendemos el servidor y esperamos hasta que aparezca la siguiente pantalla:</p> <figure> <picture> <img src="/assets/img/boot_ssd/3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Cuando aparezca presionamos <strong>F10</strong>, al pulsarlo quedará marcado en blanco como se puede apreciar en la foto anterior.</p> <p><strong>En el caso de que la pantalla anterior no salga</strong> deberíamos ver la siguiente:</p> <figure> <picture> <img src="/assets/img/boot_ssd/4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Una vez la veamos pulsamos <strong>F10</strong></p> <h5 id="paso-6"><strong>Paso 6:</strong></h5> <hr> <p>Seleccionamos <strong>“Perform Maintenance”</strong>, marcado en verde.</p> <figure> <picture> <img src="/assets/img/boot_ssd/5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h5 id="paso-7"><strong>Paso 7:</strong></h5> <hr> <p>Seleccionamos la opción <strong>“Hp Smart Storage Administrator (SSA)”</strong></p> <figure> <picture> <img src="/assets/img/boot_ssd/6.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h5 id="paso-8"><strong>Paso 8:</strong></h5> <hr> <p>Creamos con el SSD un array de un solo disco con RAID 0 (todos los pasos necesarios seguidos)</p> <p>Seleccionamos la opción de <strong>“RAID Dynamic Smart Array B120i”</strong> marcada en verde.</p> <figure> <picture> <img src="/assets/img/boot_ssd/7.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Seleccionamos la opción de <strong>“Configurar”</strong> marcada en verde</p> <figure> <picture> <img src="/assets/img/boot_ssd/8.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Seleccionamos la opción de <strong>“Crear array”</strong> marcada en verde</p> <figure> <picture> <img src="/assets/img/boot_ssd/9.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Llegaremos a la siguiente ventana:</p> <figure> <picture> <img src="/assets/img/boot_ssd/10.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>En está ventana tendremos que seleccionar el disco SSD desde el que queremos hacer BOOT (a mi no me aparece porque ya lo tengo creado con un raid 0) y pulsar <strong>“Create Array”</strong></p> <figure> <picture> <img src="/assets/img/boot_ssd/11.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Al pulsar sobre <strong>“Create Array”</strong> saldrá la siguiente ventana:</p> <figure> <picture> <img src="/assets/img/boot_ssd/12.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>En esta ventana <strong>seleccionamos RAID 0</strong> y pulsamos sobre <strong>“Create Logical Drive”</strong> y a continuación saldrá la siguiente ventana:</p> <figure> <picture> <img src="/assets/img/boot_ssd/13.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Pulsamos <strong>“Finish”</strong> y ya tendríamos creado el RAID 0 sobre el ssd.</p> <h5 id="paso-9"><strong>Paso 9:</strong></h5> <hr> <p>Una vez tenemos creado el RAID 0 tenemos que seleccionar <strong>“Definir unidad/volumen de arranque”</strong> dentro de las opciones de <strong>“RAID Dynamic Smart Array B120i”</strong>, marcado en verde.</p> <figure> <picture> <img src="/assets/img/boot_ssd/14.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Una vez lo hemos seleccionado tendremos la siguiente ventana:</p> <figure> <picture> <img src="/assets/img/boot_ssd/15.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>En esta ventana tendremos que seleccionar la <strong>unidad lógica 1</strong> como <strong>unidad primaria de arranque</strong> y pulsar <strong>“Aceptar”</strong>, selecciones marcadas en verde.</p> <h5 id="paso-10"><strong>Paso 10:</strong></h5> <hr> <p>Reiniciamos el servidor y cuando cualquiera de las pantallas del <strong>paso 5</strong> vuelva a aparecer pulsamos <strong>F9</strong></p> <h5 id="paso-11"><strong>Paso 11:</strong></h5> <hr> <p>Una vez hemos pulsado <strong>F9</strong> accederemos a la BIOS del servidor y tenemos que ir al menú <strong>“Standard Boot Order (IPL)”</strong></p> <figure> <picture> <img src="/assets/img/boot_ssd/16.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h5 id="paso-12"><strong>Paso 12:</strong></h5> <hr> <p>Al seleccionar el menú <strong>“Standard Boot Order (IPL)”</strong> saldrá la siguiente pantalla:</p> <figure> <picture> <img src="/assets/img/boot_ssd/17.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Aquí tendremos que seguir las indicaciones del pié de la BIOS para poner <strong>IPL:1 como la primera opción</strong> como se ve en la imagen.</p> <h5 id="paso-13"><strong>Paso 13:</strong></h5> <hr> <p>Presionamos <strong>ESC</strong> para cerrar el menú y confirmamos los cambios pulsando <strong>F10</strong>.</p> <figure> <picture> <img src="/assets/img/boot_ssd/18.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <hr> <p>Y ya estaría, así podemos instalar cualquier SO en el SSD y hacer boot directamente desde el mismo.</p> <p>Sólo unas puntualizaciones:</p> <ul> <li>El puerto SATA de la placa base es <strong>SATA 2</strong>, por lo que no le vamos a sacar todo el partido al SSD que pongamos, pero como en mi caso es solo para hacer BOOT no me importa.</li> <li>Existe otro workaround que sería crear un USB con un bootloader desde el cual seleccionar desde que disco queremos arrancar pero me parece más engorroso.</li> </ul> <p>Un saludo.<br> Atte. ElPavlillo.</p> </div> </article> </div> </div> <footer class="fixed-bottom text-justify"> <div class="container mt-0 text-center font-weight-bold"> © Copyright 2023 Pablo Sánchez. Actualización: 19/12/2023. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js"></script> <script defer src="/assets/js/common.js"></script> <script defer src="/assets/js/copy_code.js" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>